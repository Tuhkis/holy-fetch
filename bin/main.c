/* File generated by HolyC Translator! File: bin/main.c */
#include <stdio.h>
#include <stdint.h>

#define ToU8(x)     (uint8_t)(x)
#define ToU16(x)    (uint16_t)(x)
#define ToU32(x)    (uint32_t)(x)
#define ToU64(x)    (uint64_t)(x)
#define ToI8(x)     (int8_t)(x)
#define ToI16(x)    (int16_t)(x)
#define ToI32(x)    (int32_t)(x)
#define ToI64(x)    (int64_t)(x)
#define ToF64(x)    (double)(x)

#include "time.h"
#include "stdlib.h"
#include "string.h"
#include "krn.h"
#include "logo.h"
#include "math.h"
void Main(){
	char*BLUE="\e[1;34m";
	char*NORM="\e[0m";
	char*os=malloc(150);
	FILE*os_release=popen("lsb_release -ds","r");
	fgets(os,50,os_release);
	fclose(os_release);
	os[0]=' ';
	os[strlen(os)-2]=' ';
	char*kern=GetKrn();
	char*shell=getenv("SHELL");
	char*slash=strrchr(shell,'/');
	if (slash) {
		shell=slash+1;
	}
	double uptime;
	uptime = (((double)(GetUptime()))/60.0/60.0);
	char*term=getenv("TERM");
	char*wm=getenv("XDG_CURRENT_DESKTOP");
	int32_t ascii_art;
	ascii_art = 0;
	int32_t isDistro;
	isDistro = strcmp(os," Arch Linux \n");
	if (isDistro==0) {
		ascii_art=1;
	}
	printf("%s ",logos[ascii_art][0]);
	printf("%sOS         :%s%s",BLUE,NORM,os);
	printf("%s ",logos[ascii_art][1]);
	printf("%sKERNEL     :%s %s\n",BLUE,NORM,kern);
	printf("%s ",logos[ascii_art][2]);
	printf("%sUPTIME     :%s %.2fh\n",BLUE,NORM,uptime);
	printf("%s ",logos[ascii_art][3]);
	printf("%sSHELL      :%s %s\n",BLUE,NORM,shell);
	printf("%s ",logos[ascii_art][4]);
	printf("%sTERMINAL   :%s %s\n",BLUE,NORM,term);
	printf("%s ",logos[ascii_art][5]);
	printf("%sDESKTOP    :%s %s\n",BLUE,NORM,wm);
}

int main(int argc, char** argv){
	Main();
	return 0;
}
